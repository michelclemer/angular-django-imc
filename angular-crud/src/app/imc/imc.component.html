<div class="container">
  <h2>Calculadora de IMC</h2>
  <form (ngSubmit)="calcular()">
    <div>
      <label for="nome">Nome:</label>
      <input type="text" id="nome" [(ngModel)]="nome" name="nome" required>
    </div>
    <div>
      <label for="data_nasc">Data de Nascimento:</label>
      <input type="date" id="data_nasc" [(ngModel)]="data_nasc" name="data_nasc" required>
    </div>
    <div>
      <label for="cpf">CPF:</label>
      <input type="text" id="cpf" [(ngModel)]="cpf" name="cpf" required>
    </div>
    <div>
      <label for="sexo">Sexo:</label>
      <select id="sexo" [(ngModel)]="sexo" name="sexo" required>
        <option value="Masculino">Masculino</option>
        <option value="Feminino">Feminino</option>
      </select>
    </div>
    <div>
      <label for="peso">Peso (kg):</label>
      <input type="number" id="peso" [(ngModel)]="peso" name="peso" required>
    </div>
    <div>
      <label for="altura">Altura (m):</label>
      <input type="number" id="altura" [(ngModel)]="altura" name="altura" step="0.01" required>
    </div>
    <button type="submit">Calcular</button>
  </form>
  <div *ngIf="resultado !== null">
    <p>Seu IMC é: {{ resultado }}</p>
  </div>

  <h3>Listagem de IMCs</h3>
  <div class="filter-container">
    <label for="filtro">Filtrar:</label>
    <input type="text" id="filtro" [(ngModel)]="filtro" name="filtro" placeholder="Nome ou CPF">
  </div>
  <table *ngIf="imcs.length > 0">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Data de Nascimento</th>
        <th>CPF</th>
        <th>Sexo</th>
        <th>Peso</th>
        <th>Altura</th>
        <th>IMC</th>
        <th>Status</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let imc of filtrarIMCs()">
        <td>{{ imc.imc_user_name }}</td>
        <td>{{ imc.imc_user_birthday }}</td>
        <td>{{ imc.imc_user_cpf }}</td>
        <td>{{ imc.imc_user_sex }}</td>
        <td>{{ imc.imc_weight }}</td>
        <td>{{ imc.imc_height }}</td>

        <td>{{ imc.imc_result }}</td>
        <td>{{ imc.info_imc }}</td>
        <td>
          <button (click)="editar(imc)">Alterar</button>
          <button (click)="deletar(imc)">Deletar</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="imcs.length === 0">
    <p>Nenhum IMC cadastrado.</p>
  </div>
</div>
